import{aP as Ge,r as h,c as H,q as Ae,x as n,y as d,z as e,L as v,O as o,P as x,C as A,K as c,aq as k,Q as X,ac as re,aY as _e,o as Me,Z as He,u as p,S as ae,al as N,aT as V,R as ne,aV as oe,J as Ye,T as Je,Y as Xe}from"./vue-vendor-DV7DYXbz.js";import{b2 as Ze,b3 as et,b4 as tt,b5 as at,s as f,b6 as rt,_ as st,b7 as lt,b8 as ot,b9 as nt,ba as dt,bb as it,bc as ut,bd as Ue,be as gt,bf as ct,bg as ft,bh as xt,bi as bt}from"./index-D4zP1mm5.js";import{C as pt}from"./ConfirmModal-BPY3qHky.js";import"./element-plus-BSjV1f9S.js";import"./vendor-Dr8jvgFu.js";const yt=Ge("settings",()=>{const D=h({siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,apiStatsNotice:{enabled:!1,title:"",content:""},updatedAt:null}),B=h(!1),$=h(!1),R=async()=>{B.value=!0;const C=await Ze();return C.success&&(D.value={...D.value,...C.data},S()),B.value=!1,C},b=async C=>{$.value=!0;const U=await et(C);return U.success&&(D.value={...D.value,...U.data},S()),$.value=!1,U},W=async()=>{const C={siteName:"Claude Relay Service",siteIcon:"",siteIconData:"",showAdminButton:!0,apiStatsNotice:{enabled:!1,title:"",content:""},updatedAt:null};return D.value={...C},await b(C)},S=()=>{if(D.value.siteName&&(document.title=`${D.value.siteName} - 管理后台`),D.value.siteIconData||D.value.siteIcon){const C=document.querySelector('link[rel="icon"]')||document.createElement("link");C.rel="icon",C.href=D.value.siteIconData||D.value.siteIcon,document.querySelector('link[rel="icon"]')||document.head.appendChild(C)}};return{oemSettings:D,loading:B,saving:$,loadOemSettings:R,saveOemSettings:b,resetOemSettings:W,applyOemSettings:S,formatDateTime:C=>C?new Date(C).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"",validateIconFile:C=>{const U=[];return C.size>350*1024&&U.push("图标文件大小不能超过 350KB"),["image/x-icon","image/png","image/jpeg","image/jpg","image/svg+xml"].includes(C.type)||U.push("不支持的文件类型，请选择 .ico, .png, .jpg 或 .svg 文件"),{isValid:U.length===0,errors:U}},fileToBase64:C=>new Promise((U,F)=>{const G=new FileReader;G.onload=_=>U(_.target.result),G.onerror=F,G.readAsDataURL(C)})}}),vt={class:"mb-6 rounded-xl border border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 p-4 dark:border-gray-700 dark:from-blue-900/20 dark:to-indigo-900/20"},mt={class:"flex flex-wrap items-center justify-between gap-4"},kt={class:"flex items-center gap-4"},ht={class:"text-sm font-medium text-gray-700 dark:text-gray-300"},wt={class:"font-bold text-blue-600 dark:text-blue-400"},Ct={class:"text-xs text-gray-500 dark:text-gray-400"},St=["disabled"],Tt={class:"mb-4 flex flex-wrap items-center gap-3"},Mt={class:"relative flex-1"},Ut={class:"flex gap-1"},At=["onClick"],It={key:0,class:"py-12 text-center"},Bt={key:1,class:"overflow-x-auto rounded-lg border border-gray-200 dark:border-gray-700"},Rt={class:"min-w-full text-sm"},Et={class:"bg-gray-50 dark:bg-gray-800"},Dt={class:"divide-y divide-gray-200 bg-white dark:divide-gray-700 dark:bg-gray-900"},Vt={class:"whitespace-nowrap px-3 py-2.5"},$t={class:"font-medium text-gray-900 dark:text-gray-100"},Qt={key:0,class:"text-xs text-gray-400"},Pt={class:"whitespace-nowrap px-3 py-2.5 text-right font-mono text-gray-700 dark:text-gray-300"},qt={class:"whitespace-nowrap px-3 py-2.5 text-right font-mono text-gray-700 dark:text-gray-300"},jt={class:"hidden whitespace-nowrap px-3 py-2.5 text-right font-mono text-gray-500 dark:text-gray-400 md:table-cell"},Lt={class:"hidden whitespace-nowrap px-3 py-2.5 text-right font-mono text-gray-500 dark:text-gray-400 md:table-cell"},Nt={class:"hidden whitespace-nowrap px-3 py-2.5 text-right text-gray-500 dark:text-gray-400 lg:table-cell"},Ot={key:0},Wt={key:2,class:"mt-3 text-right text-xs text-gray-400 dark:text-gray-500"},Ft={__name:"ModelPricingSection",setup(D){const B=h(!1),$=h(!1),R=h({}),b=h({}),W=h(""),S=h("all"),g=h("name"),T=h(!0),K=[{key:"all",label:"全部"},{key:"claude",label:"Claude"},{key:"gemini",label:"Gemini"},{key:"openai",label:"OpenAI"},{key:"other",label:"其他"}],C=H(()=>Object.keys(R.value).length),U=H(()=>b.value.lastUpdated?new Date(b.value.lastUpdated).toLocaleString("zh-CN"):"未知"),F=H(()=>Object.entries(R.value).map(([u,i])=>({name:u,provider:z(u),inputCost:(i.input_cost_per_token||0)*1e6,outputCost:(i.output_cost_per_token||0)*1e6,cacheCreateCost:(i.cache_creation_input_token_cost||0)*1e6,cacheReadCost:(i.cache_read_input_token_cost||0)*1e6,maxTokens:i.max_tokens||i.max_output_tokens||0}))),G=H(()=>{let u=F.value;if(S.value!=="all"){const l={claude:m=>m.includes("claude"),gemini:m=>m.includes("gemini"),openai:m=>m.includes("gpt")||m.includes("o1")||m.includes("o3")||m.includes("o4")||m.includes("codex"),other:m=>!m.includes("claude")&&!m.includes("gemini")&&!m.includes("gpt")&&!m.includes("o1")&&!m.includes("o3")&&!m.includes("o4")&&!m.includes("codex")}[S.value];l&&(u=u.filter(m=>l(m.name.toLowerCase())))}if(W.value){const i=W.value.toLowerCase();u=u.filter(l=>l.name.toLowerCase().includes(i))}return u}),_=H(()=>{const u=[...G.value],l={name:m=>m.name,input:m=>m.inputCost,output:m=>m.outputCost}[g.value];return l&&u.sort((m,Y)=>{const M=l(m),q=l(Y);return typeof M=="string"?T.value?M.localeCompare(q):q.localeCompare(M):T.value?M-q:q-M}),u}),z=u=>{const i=u.toLowerCase();return i.includes("claude")?"Anthropic":i.includes("gemini")?"Google":i.includes("gpt")||i.includes("o1")||i.includes("o3")||i.includes("o4")||i.includes("codex")?"OpenAI":i.includes("deepseek")?"DeepSeek":i.includes("llama")||i.includes("meta")?"Meta":i.includes("mistral")?"Mistral":""},E=u=>!u||u===0?"-":u<.01?`$${u.toFixed(4)}`:u<1?`$${u.toFixed(3)}`:`$${u.toFixed(2)}`,P=u=>u?u>=1e6?`${(u/1e6).toFixed(1)}M`:u>=1e3?`${(u/1e3).toFixed(0)}K`:String(u):"-",L=u=>{g.value===u?T.value=!T.value:(g.value=u,T.value=!0)},O=async()=>{B.value=!0;const[u,i]=await Promise.all([tt(),at()]);u.success?R.value=u.data:f(u.message||"加载模型价格失败","error"),i.success?b.value=i.data:f(i.message||"获取价格状态失败","error"),B.value=!1},Z=async()=>{$.value=!0;const u=await rt();u.success?(f("价格数据已刷新","success"),await O()):f(u.message||"刷新失败","error"),$.value=!1};return Ae(O),(u,i)=>(d(),n("div",null,[e("div",vt,[e("div",mt,[e("div",kt,[i[5]||(i[5]=e("div",{class:"flex h-12 w-12 items-center justify-center rounded-xl bg-blue-500/10 text-blue-600 dark:bg-blue-500/20 dark:text-blue-400"},[e("i",{class:"fas fa-coins text-xl"})],-1)),e("div",null,[e("p",ht,[i[4]||(i[4]=o(" 模型总数: ",-1)),e("span",wt,x(C.value),1)]),e("p",Ct,"上次更新: "+x(U.value),1)])]),e("button",{class:A(["flex items-center gap-2 rounded-lg px-4 py-2 text-sm font-medium shadow-sm transition",$.value?"cursor-not-allowed bg-gray-200 text-gray-400 dark:bg-gray-700 dark:text-gray-500":"bg-blue-500 text-white hover:bg-blue-600 hover:shadow-md"]),disabled:$.value,onClick:Z},[e("i",{class:A(["fas",$.value?"fa-spinner fa-spin":"fa-sync-alt"])},null,2),o(" "+x($.value?"刷新中...":"立即刷新"),1)],10,St)])]),e("div",Tt,[e("div",Mt,[i[6]||(i[6]=e("i",{class:"fas fa-search absolute left-3 top-1/2 -translate-y-1/2 text-gray-400"},null,-1)),c(e("input",{"onUpdate:modelValue":i[0]||(i[0]=l=>W.value=l),class:"w-full rounded-lg border border-gray-200 bg-white py-2 pl-9 pr-3 text-sm text-gray-700 placeholder-gray-400 transition focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-700 dark:bg-gray-800 dark:text-gray-300",placeholder:"搜索模型名称...",type:"text"},null,512),[[k,W.value]])]),e("div",Ut,[(d(),n(X,null,re(K,l=>e("button",{key:l.key,class:A(["rounded-lg px-3 py-2 text-xs font-medium transition",S.value===l.key?"bg-blue-500 text-white shadow-sm":"bg-gray-100 text-gray-600 hover:bg-gray-200 dark:bg-gray-800 dark:text-gray-400 dark:hover:bg-gray-700"]),onClick:m=>S.value=l.key},x(l.label),11,At)),64))])]),B.value?(d(),n("div",It,i[7]||(i[7]=[e("i",{class:"fas fa-spinner fa-spin mb-4 text-2xl text-blue-500"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"加载价格数据中...",-1)]))):(d(),n("div",Bt,[e("table",Rt,[e("thead",Et,[e("tr",null,[e("th",{class:"cursor-pointer px-3 py-3 text-left text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:i[1]||(i[1]=l=>L("name"))},[i[8]||(i[8]=o(" 模型名称 ",-1)),g.value==="name"?(d(),n("i",{key:0,class:A(["fas ml-1",T.value?"fa-sort-up":"fa-sort-down"])},null,2)):v("",!0)]),e("th",{class:"cursor-pointer px-3 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:i[2]||(i[2]=l=>L("input"))},[i[9]||(i[9]=o(" 输入 $/MTok ",-1)),g.value==="input"?(d(),n("i",{key:0,class:A(["fas ml-1",T.value?"fa-sort-up":"fa-sort-down"])},null,2)):v("",!0)]),e("th",{class:"cursor-pointer px-3 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-200",onClick:i[3]||(i[3]=l=>L("output"))},[i[10]||(i[10]=o(" 输出 $/MTok ",-1)),g.value==="output"?(d(),n("i",{key:0,class:A(["fas ml-1",T.value?"fa-sort-up":"fa-sort-down"])},null,2)):v("",!0)]),i[11]||(i[11]=e("th",{class:"hidden px-3 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 md:table-cell"}," 缓存创建 ",-1)),i[12]||(i[12]=e("th",{class:"hidden px-3 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 md:table-cell"}," 缓存读取 ",-1)),i[13]||(i[13]=e("th",{class:"hidden px-3 py-3 text-right text-xs font-medium uppercase tracking-wider text-gray-500 dark:text-gray-400 lg:table-cell"}," 上下文窗口 ",-1))])]),e("tbody",Dt,[(d(!0),n(X,null,re(_.value,l=>(d(),n("tr",{key:l.name,class:"transition hover:bg-gray-50 dark:hover:bg-gray-800/50"},[e("td",Vt,[e("div",$t,x(l.name),1),l.provider?(d(),n("div",Qt,x(l.provider),1)):v("",!0)]),e("td",Pt,x(E(l.inputCost)),1),e("td",qt,x(E(l.outputCost)),1),e("td",jt,x(E(l.cacheCreateCost)),1),e("td",Lt,x(E(l.cacheReadCost)),1),e("td",Nt,x(P(l.maxTokens)),1)]))),128)),_.value.length===0?(d(),n("tr",Ot,i[14]||(i[14]=[e("td",{class:"px-3 py-8 text-center text-gray-500 dark:text-gray-400",colspan:"6"},[e("i",{class:"fas fa-search mb-2 text-2xl text-gray-300 dark:text-gray-600"}),e("p",null,"没有匹配的模型")],-1)]))):v("",!0)])])])),B.value?v("",!0):(d(),n("div",Wt," 显示 "+x(_.value.length)+" / "+x(F.value.length)+" 个模型 ",1))]))}},zt={class:"settings-container"},Kt={class:"card p-4 sm:p-6"},Gt={class:"mb-6"},_t={class:"flex space-x-8"},Ht={key:0,class:"py-12 text-center"},Yt={key:1},Jt={class:"table-container hidden sm:block"},Xt={class:"min-w-full"},Zt={class:"divide-y divide-gray-200/50 dark:divide-gray-600/50"},ea={class:"table-row"},ta={class:"px-6 py-4"},aa={class:"table-row"},ra={class:"px-6 py-4"},sa={class:"space-y-3"},la={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},oa=["src"],na={class:"table-row"},da={class:"px-6 py-4"},ia={class:"flex items-center"},ua={class:"inline-flex cursor-pointer items-center"},ga={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},ca={class:"border-b border-gray-100 dark:border-gray-700"},fa={class:"px-6 py-4"},xa={class:"flex items-center"},ba={class:"inline-flex cursor-pointer items-center"},pa={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},ya={key:0,class:"mt-3 space-y-3"},va={class:"px-6 py-6",colspan:"2"},ma={class:"flex items-center justify-between"},ka={class:"flex gap-3"},ha=["disabled"],wa={key:0,class:"loading-spinner mr-2"},Ca={key:1,class:"fas fa-save mr-2"},Sa=["disabled"],Ta={key:0,class:"text-sm text-gray-500 dark:text-gray-400"},Ma={class:"space-y-4 sm:hidden"},Ua={class:"glass-card p-4"},Aa={class:"glass-card p-4"},Ia={class:"space-y-3"},Ba={key:0,class:"inline-flex items-center gap-3 rounded-lg bg-gray-50 p-3 dark:bg-gray-700"},Ra=["src"],Ea={class:"glass-card p-4"},Da={class:"space-y-2"},Va={class:"inline-flex cursor-pointer items-center"},$a={class:"ml-3 text-sm font-medium text-gray-900 dark:text-gray-300"},Qa={class:"glass-card p-4"},Pa={class:"flex flex-col gap-3"},qa=["disabled"],ja={key:0,class:"loading-spinner mr-2"},La={key:1,class:"fas fa-save mr-2"},Na=["disabled"],Oa={key:0,class:"text-center text-sm text-gray-500 dark:text-gray-400"},Wa={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Fa={class:"flex items-center justify-between"},za={class:"relative inline-flex cursor-pointer items-center"},Ka={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Ga={class:"space-y-3"},_a={class:"font-medium text-gray-700 dark:text-gray-300"},Ha={class:"ml-2 text-sm text-gray-500 dark:text-gray-400"},Ya={class:"relative inline-flex cursor-pointer items-center"},Ja=["onUpdate:modelValue"],Xa={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Za={class:"mb-4 flex items-center justify-between"},er={key:0,class:"space-y-4"},tr={class:"flex items-start justify-between"},ar={class:"flex-1"},rr={class:"flex items-center"},sr={class:"font-semibold text-gray-800 dark:text-gray-200"},lr={class:"text-sm text-gray-500 dark:text-gray-400"},or={class:"mt-3 space-y-1 text-sm"},nr={key:0,class:"flex items-center text-gray-600 dark:text-gray-400"},dr={class:"truncate"},ir={key:1,class:"flex items-center text-gray-600 dark:text-gray-400"},ur={class:"truncate"},gr={key:2,class:"flex items-center text-gray-600 dark:text-gray-400"},cr={class:"truncate"},fr={key:3,class:"flex items-center text-gray-600 dark:text-gray-400"},xr={class:"truncate"},br={key:4,class:"flex items-center text-gray-600 dark:text-gray-400"},pr={class:"truncate"},yr={key:5,class:"flex items-center text-gray-600 dark:text-gray-400"},vr={class:"truncate"},mr={key:6,class:"flex items-center text-gray-600 dark:text-gray-400"},kr={class:"ml-4 flex items-center space-x-2"},hr={class:"relative inline-flex cursor-pointer items-center"},wr=["checked","onChange"],Cr=["onClick"],Sr=["onClick"],Tr=["onClick"],Mr={key:1,class:"py-8 text-center text-gray-500 dark:text-gray-400"},Ur={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Ar={class:"grid grid-cols-1 gap-4 md:grid-cols-3"},Ir={key:0,class:"py-12 text-center"},Br={key:1},Rr={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Er={class:"flex items-center justify-between"},Dr={class:"relative inline-flex cursor-pointer items-center"},Vr={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},$r={class:"flex items-center justify-between"},Qr={class:"relative inline-flex cursor-pointer items-center"},Pr={key:0,class:"mt-6 space-y-4"},qr={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},jr={class:"flex items-center justify-between"},Lr={class:"relative inline-flex cursor-pointer items-center"},Nr={key:0,class:"mt-6 space-y-4"},Or={class:"mb-6 rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},Wr={class:"flex items-center justify-between"},Fr={class:"relative inline-flex cursor-pointer items-center"},zr={key:0,class:"mt-6 space-y-4"},Kr={key:0,class:"rounded-lg bg-gray-50 p-4 text-sm text-gray-500 dark:bg-gray-700/50 dark:text-gray-400"},Gr={key:0,class:"ml-2"},_r={key:0,class:"py-12 text-center"},Hr={key:1},Yr={class:"mb-6 rounded-lg bg-gradient-to-r from-blue-50 to-indigo-50 p-6 dark:from-blue-900/20 dark:to-indigo-900/20"},Jr={class:"flex items-start"},Xr={class:"mt-2 text-sm text-gray-600 dark:text-gray-400"},Zr={class:"rounded-lg bg-white/80 p-6 shadow-lg backdrop-blur-sm dark:bg-gray-800/80"},es={class:"mb-4 flex items-center justify-between"},ts=["disabled"],as={class:"space-y-4"},rs={class:"flex items-center"},ss={class:"font-medium text-gray-900 dark:text-gray-100"},ls={class:"text-xs text-gray-500 dark:text-gray-400"},os={key:0,class:"ml-2 rounded bg-blue-100 px-1.5 py-0.5 text-blue-700 dark:bg-blue-900/50 dark:text-blue-300"},ns={class:"flex items-center gap-3"},ds=["onUpdate:modelValue"],is={key:0,class:"mt-4 rounded-lg bg-gray-50 p-3 text-sm text-gray-500 dark:bg-gray-700/50 dark:text-gray-400"},us={key:0,class:"ml-2"},gs={class:"dark:to-gray-750 relative border-b border-gray-200 bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-5 dark:border-gray-700 dark:from-gray-800"},cs={class:"flex items-center justify-between"},fs={class:"flex items-center space-x-3"},xs={class:"text-xl font-semibold text-gray-900 dark:text-white"},bs={class:"mt-0.5 text-sm text-gray-600 dark:text-gray-400"},ps={class:"p-6"},ys={class:"space-y-5"},vs={class:"relative"},ms=["disabled"],ks={key:0,class:"mt-1 text-xs text-amber-600 dark:text-amber-400"},hs={key:0},ws={class:"relative"},Cs={key:0,class:"absolute inset-y-0 right-0 flex items-center pr-3"},Ss={key:1,class:"absolute inset-y-0 right-0 flex items-center pr-3"},Ts={key:0,class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},Ms={class:"text-sm text-blue-700 dark:text-blue-300"},Us={key:1,class:"space-y-5"},As={key:2,class:"space-y-5"},Is={key:3,class:"space-y-5"},Bs={class:"grid grid-cols-1 gap-4 sm:grid-cols-2"},Rs={key:4,class:"rounded-xl border border-gray-200 bg-gray-50 p-4 dark:border-gray-700 dark:bg-gray-900/50"},Es={class:"space-y-4"},Ds={class:"flex items-center justify-between"},Vs={class:"flex cursor-pointer items-center",for:"enableSign"},$s={key:0,class:"rounded-full bg-green-100 px-2 py-1 text-xs font-medium text-green-700 dark:bg-green-900/50 dark:text-green-400"},Qs={key:0},Ps={class:"border-t border-gray-200 bg-gray-50 px-6 py-4 dark:border-gray-700 dark:bg-gray-900/50"},qs={class:"flex items-center justify-between"},js={class:"flex space-x-3"},Ls=["disabled"],Ns=["disabled"],Os=Object.assign({name:"SettingsView"},{__name:"SettingsView",setup(D){const B=yt(),{loading:$,saving:R,oemSettings:b}=_e(B),W=h(),S=h("branding"),g=h(!0),T=h(new AbortController),K=h(!1),C=h({title:"",message:"",type:"primary",confirmText:"确认",cancelText:"取消"}),U=h(null),F=(a,t,r="确认",y="取消",w="primary")=>new Promise(J=>{C.value={title:a,message:t,confirmText:r,cancelText:y,type:w},U.value=J,K.value=!0}),G=()=>{var a;K.value=!1,(a=U.value)==null||a.call(U,!0)},_=()=>{var a;K.value=!1,(a=U.value)==null||a.call(U,!1)},z=H({get(){return!b.value.showAdminButton},set(a){b.value.showAdminButton=!a}}),E=h(!1),P=h(!1),L=h(!1),O=h(!1),Z={accountAnomaly:!0,quotaWarning:!0,systemError:!0,securityAlert:!0,rateLimitRecovery:!0},u=h({enabled:!1,platforms:[],notificationTypes:{...Z},retrySettings:{maxRetries:3,retryDelay:1e3,timeout:1e4}}),i=h(!1),l=h({claudeCodeOnlyEnabled:!1,globalSessionBindingEnabled:!1,sessionBindingErrorMessage:"你的本地session已污染，请清理后使用。",sessionBindingTtlDays:1,userMessageQueueEnabled:!1,userMessageQueueDelayMs:200,userMessageQueueTimeoutMs:5e3,concurrentRequestQueueEnabled:!1,concurrentRequestQueueMaxSize:3,concurrentRequestQueueMaxSizeMultiplier:0,concurrentRequestQueueTimeoutMs:1e4,updatedAt:null,updatedBy:null}),m=h(!1),Y=h(!1),M=h({baseService:"claude",rates:{claude:1,codex:1,gemini:1,droid:1,bedrock:1,azure:1,ccr:1},updatedAt:null,updatedBy:null}),q=h(!1),Q=h(null),s=h({type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1}),de=Me(S,async a=>{g.value&&(a==="webhook"?await ee():a==="claude"?await Be():a==="serviceRates"&&await ue())}),ie=Me(()=>s.value.type,a=>{E.value=!1,P.value=!1,Q.value||(a==="bark"?(s.value.url="",s.value.enableSign=!1,s.value.secret="",s.value.botToken="",s.value.chatId="",s.value.apiBaseUrl="",s.value.proxyUrl="",s.value.host="",s.value.port=null,s.value.secure=!1,s.value.user="",s.value.pass="",s.value.from="",s.value.to="",s.value.timeout=null,s.value.ignoreTLS=!1):a==="smtp"?(s.value.url="",s.value.enableSign=!1,s.value.secret="",s.value.deviceKey="",s.value.serverUrl="",s.value.level="",s.value.sound="",s.value.group="",s.value.botToken="",s.value.chatId="",s.value.apiBaseUrl="",s.value.proxyUrl=""):a==="telegram"?(s.value.url="",s.value.enableSign=!1,s.value.secret="",s.value.deviceKey="",s.value.serverUrl="",s.value.level="",s.value.sound="",s.value.group="",s.value.host="",s.value.port=null,s.value.secure=!1,s.value.user="",s.value.pass="",s.value.from="",s.value.to="",s.value.timeout=null,s.value.ignoreTLS=!1,s.value.botToken="",s.value.chatId="",s.value.apiBaseUrl="",s.value.proxyUrl=""):(s.value.deviceKey="",s.value.serverUrl="",s.value.level="",s.value.sound="",s.value.group="",s.value.host="",s.value.port=null,s.value.secure=!1,s.value.user="",s.value.pass="",s.value.from="",s.value.to="",s.value.timeout=null,s.value.ignoreTLS=!1,s.value.botToken="",s.value.chatId="",s.value.apiBaseUrl="",s.value.proxyUrl=""))}),Ie=H(()=>s.value.type==="bark"?!!s.value.deviceKey:s.value.type==="telegram"?!!(s.value.botToken&&s.value.chatId):s.value.type==="smtp"?!!(s.value.host&&s.value.user&&s.value.pass&&s.value.to):!!s.value.url&&!E.value);Ae(async()=>{try{await B.loadOemSettings(),S.value==="webhook"&&await ee(),S.value==="serviceRates"&&await ue()}catch{f("加载设置失败","error")}}),He(()=>{g.value=!1,T.value&&T.value.abort(),de&&de(),ie&&ie(),q.value&&(q.value=!1,Q.value=null)});const ee=async()=>{if(g.value)try{const a=await lt({signal:T.value.signal});if(a.success&&g.value){const t=a.config||{};u.value={...t,notificationTypes:{...Z,...t.notificationTypes||{}}}}}catch(a){if(a.name==="AbortError"||!g.value)return;f("获取webhook配置失败","error"),console.error(a)}},te=async()=>{if(g.value)try{const a={...u.value,notificationTypes:{...Z,...u.value.notificationTypes||{}}};(await nt(a,{signal:T.value.signal})).success&&g.value&&(u.value=a,f("配置已保存","success"))}catch(a){if(a.name==="AbortError"||!g.value)return;f("保存配置失败","error"),console.error(a)}},Be=async()=>{var a,t,r,y,w,J,me,ke,he,we,Ce,Se,Te;if(g.value){i.value=!0;try{const I=await bt({signal:T.value.signal});I.success&&g.value&&(l.value={claudeCodeOnlyEnabled:((a=I.config)==null?void 0:a.claudeCodeOnlyEnabled)??!1,globalSessionBindingEnabled:((t=I.config)==null?void 0:t.globalSessionBindingEnabled)??!1,sessionBindingErrorMessage:((r=I.config)==null?void 0:r.sessionBindingErrorMessage)||"你的本地session已污染，请清理后使用。",sessionBindingTtlDays:((y=I.config)==null?void 0:y.sessionBindingTtlDays)??1,userMessageQueueEnabled:((w=I.config)==null?void 0:w.userMessageQueueEnabled)??!1,userMessageQueueDelayMs:((J=I.config)==null?void 0:J.userMessageQueueDelayMs)??200,userMessageQueueTimeoutMs:((me=I.config)==null?void 0:me.userMessageQueueTimeoutMs)??5e3,concurrentRequestQueueEnabled:((ke=I.config)==null?void 0:ke.concurrentRequestQueueEnabled)??!1,concurrentRequestQueueMaxSize:((he=I.config)==null?void 0:he.concurrentRequestQueueMaxSize)??3,concurrentRequestQueueMaxSizeMultiplier:((we=I.config)==null?void 0:we.concurrentRequestQueueMaxSizeMultiplier)??0,concurrentRequestQueueTimeoutMs:((Ce=I.config)==null?void 0:Ce.concurrentRequestQueueTimeoutMs)??1e4,updatedAt:((Se=I.config)==null?void 0:Se.updatedAt)||null,updatedBy:((Te=I.config)==null?void 0:Te.updatedBy)||null})}catch(I){if(I.name==="AbortError"||!g.value)return;f("获取 Claude 转发配置失败","error"),console.error(I)}finally{g.value&&(i.value=!1)}}},j=async()=>{var a,t;if(g.value)try{const r={claudeCodeOnlyEnabled:l.value.claudeCodeOnlyEnabled,globalSessionBindingEnabled:l.value.globalSessionBindingEnabled,sessionBindingErrorMessage:l.value.sessionBindingErrorMessage,sessionBindingTtlDays:l.value.sessionBindingTtlDays,userMessageQueueEnabled:l.value.userMessageQueueEnabled,userMessageQueueDelayMs:l.value.userMessageQueueDelayMs,userMessageQueueTimeoutMs:l.value.userMessageQueueTimeoutMs,concurrentRequestQueueEnabled:l.value.concurrentRequestQueueEnabled,concurrentRequestQueueMaxSize:l.value.concurrentRequestQueueMaxSize,concurrentRequestQueueMaxSizeMultiplier:l.value.concurrentRequestQueueMaxSizeMultiplier,concurrentRequestQueueTimeoutMs:l.value.concurrentRequestQueueTimeoutMs},y=await it(r,{signal:T.value.signal});y.success&&g.value&&(l.value={...l.value,updatedAt:((a=y.config)==null?void 0:a.updatedAt)||new Date().toISOString(),updatedBy:((t=y.config)==null?void 0:t.updatedBy)||null},f("Claude 转发配置已保存","success"))}catch(r){if(r.name==="AbortError"||!g.value)return;f("保存 Claude 转发配置失败","error"),console.error(r)}},ue=async()=>{var a,t,r,y;if(g.value){m.value=!0;try{const w=await ot({signal:T.value.signal});w.success&&g.value&&(M.value={baseService:((a=w.data)==null?void 0:a.baseService)||"claude",rates:((t=w.data)==null?void 0:t.rates)||M.value.rates,updatedAt:(r=w.data)==null?void 0:r.updatedAt,updatedBy:(y=w.data)==null?void 0:y.updatedBy})}catch(w){if(w.name==="AbortError"||!g.value)return;console.error("加载服务倍率配置失败:",w)}finally{g.value&&(m.value=!1)}}},Re=async()=>{var a,t;if(g.value){Y.value=!0;try{const r=await ut({rates:M.value.rates,baseService:M.value.baseService},{signal:T.value.signal});r.success&&g.value&&(M.value.updatedAt=((a=r.data)==null?void 0:a.updatedAt)||new Date().toISOString(),M.value.updatedBy=(t=r.data)==null?void 0:t.updatedBy,f("服务倍率配置已保存","success"))}catch(r){if(r.name==="AbortError"||!g.value)return;f("保存服务倍率配置失败","error"),console.error(r)}finally{g.value&&(Y.value=!1)}}},Ee=a=>({claude:"fas fa-robot",codex:"fas fa-code",gemini:"fas fa-gem",droid:"fas fa-android",bedrock:"fab fa-aws",azure:"fab fa-microsoft",ccr:"fas fa-server"})[a]||"fas fa-cog",De=a=>({claude:"bg-gradient-to-br from-orange-500 to-amber-600",codex:"bg-gradient-to-br from-green-500 to-emerald-600",gemini:"bg-gradient-to-br from-blue-500 to-indigo-600",droid:"bg-gradient-to-br from-green-600 to-lime-600",bedrock:"bg-gradient-to-br from-yellow-500 to-orange-600",azure:"bg-gradient-to-br from-blue-600 to-cyan-600",ccr:"bg-gradient-to-br from-purple-500 to-pink-600"})[a]||"bg-gradient-to-br from-gray-500 to-gray-600",Ve=a=>({claude:"Claude",codex:"Codex (OpenAI)",gemini:"Gemini",droid:"Droid",bedrock:"AWS Bedrock",azure:"Azure OpenAI",ccr:"CCR"})[a]||a,$e=()=>{if(["bark","smtp","telegram"].includes(s.value.type)){E.value=!1,P.value=!1;return}const a=s.value.url;if(!a){E.value=!1,P.value=!1;return}try{new URL(a),a.startsWith("http://")||a.startsWith("https://")?(E.value=!1,P.value=!0):(E.value=!0,P.value=!1)}catch{E.value=!0,P.value=!1}},ge=()=>{if(s.value.type==="bark"){if(!s.value.deviceKey)return f("请输入Bark设备密钥","error"),!1}else if(s.value.type==="telegram"){if(!s.value.botToken)return f("请输入 Telegram 机器人 Token","error"),!1;if(!s.value.chatId)return f("请输入 Telegram Chat ID","error"),!1;if(s.value.apiBaseUrl)try{const a=new URL(s.value.apiBaseUrl);if(!["http:","https:"].includes(a.protocol))return f("Telegram API 基础地址仅支持 http 或 https","error"),!1}catch{return f("请输入有效的 Telegram API 基础地址","error"),!1}if(s.value.proxyUrl)try{const a=new URL(s.value.proxyUrl);if(!["http:","https:","socks4:","socks4a:","socks5:"].includes(a.protocol))return f("Telegram 代理仅支持 http/https/socks 协议","error"),!1}catch{return f("请输入有效的 Telegram 代理地址","error"),!1}}else if(s.value.type==="smtp"){const a=[{field:"host",message:"SMTP服务器"},{field:"user",message:"用户名"},{field:"pass",message:"密码"},{field:"to",message:"收件人邮箱"}];for(const{field:t,message:r}of a)if(!s.value[t])return f(`请输入${r}`,"error"),!1}else{if(!s.value.url)return f("请输入Webhook URL","error"),!1;if(E.value)return f("请输入有效的Webhook URL","error"),!1}return!0},Qe=async()=>{if(g.value&&ge()){O.value=!0;try{let a;Q.value?a=await gt(Q.value.id,s.value,{signal:T.value.signal}):a=await ct(s.value,{signal:T.value.signal}),a.success&&g.value&&(f(Q.value?"平台已更新":"平台已添加","success"),await ee(),se())}catch(a){if(a.name==="AbortError"||!g.value)return;f(a.message||"操作失败","error"),console.error(a)}finally{g.value&&(O.value=!1)}}},Pe=a=>{Q.value=a,s.value={type:a.type||"wechat_work",name:a.name||"",url:a.url||"",enableSign:a.enableSign||!1,secret:a.secret||"",botToken:a.botToken||"",chatId:a.chatId||"",apiBaseUrl:a.apiBaseUrl||"",proxyUrl:a.proxyUrl||"",deviceKey:a.deviceKey||"",serverUrl:a.serverUrl||"",level:a.level||"",sound:a.sound||"",group:a.group||"",host:a.host||"",port:a.port??null,secure:a.secure||!1,user:a.user||"",pass:a.pass||"",from:a.from||"",to:Array.isArray(a.to)?a.to.join(", "):a.to||"",timeout:a.timeout??null,ignoreTLS:a.ignoreTLS||!1},q.value=!0},qe=async a=>{if(g.value&&await F("删除平台","确定要删除这个平台吗？","删除","取消","danger"))try{(await xt(a,{signal:T.value.signal})).success&&g.value&&(f("平台已删除","success"),await ee())}catch(t){if(t.name==="AbortError"||!g.value)return;f("删除失败","error"),console.error(t)}},je=async a=>{if(g.value)try{const t=await ft(a,{signal:T.value.signal});t.success&&g.value&&(f(t.message,"success"),await ee())}catch(t){if(t.name==="AbortError"||!g.value)return;f("操作失败","error"),console.error(t)}},Le=async a=>{if(g.value)try{const t={type:a.type,secret:a.secret,enableSign:a.enableSign};a.type==="bark"?(t.deviceKey=a.deviceKey,t.serverUrl=a.serverUrl,t.level=a.level,t.sound=a.sound,t.group=a.group):a.type==="smtp"?(t.host=a.host,t.port=a.port,t.secure=a.secure,t.user=a.user,t.pass=a.pass,t.from=a.from,t.to=a.to,t.ignoreTLS=a.ignoreTLS):a.type==="telegram"?(t.botToken=a.botToken,t.chatId=a.chatId,t.apiBaseUrl=a.apiBaseUrl,t.proxyUrl=a.proxyUrl):t.url=a.url,(await Ue(t,{signal:T.value.signal})).success&&g.value&&f("测试成功","success")}catch(t){if(t.name==="AbortError"||!g.value)return;f(t.error||t.message||"测试失败","error"),console.error(t)}},Ne=async()=>{if(g.value&&ge()){L.value=!0;try{(await Ue(s.value,{signal:T.value.signal})).success&&g.value&&f("测试成功","success")}catch(a){if(a.name==="AbortError"||!g.value)return;f(a.error||a.message||"测试失败","error"),console.error(a)}finally{g.value&&(L.value=!1)}}},Oe=async()=>{var a,t,r,y;if(g.value)try{(await dt({signal:T.value.signal})).success&&g.value&&f("测试通知已发送","success")}catch(w){if(w.name==="AbortError"||!g.value)return;const J=((t=(a=w==null?void 0:w.response)==null?void 0:a.data)==null?void 0:t.message)||((y=(r=w==null?void 0:w.response)==null?void 0:r.data)==null?void 0:y.error)||(w==null?void 0:w.message)||"发送失败";f(J,"error"),console.error(w)}},se=()=>{g.value&&(q.value=!1,setTimeout(()=>{g.value&&(Q.value=null,s.value={type:"wechat_work",name:"",url:"",enableSign:!1,secret:"",botToken:"",chatId:"",apiBaseUrl:"",proxyUrl:"",deviceKey:"",serverUrl:"",level:"",sound:"",group:"",host:"",port:null,secure:!1,user:"",pass:"",from:"",to:"",timeout:null,ignoreTLS:!1},E.value=!1,P.value=!1,L.value=!1,O.value=!1)},0))},ce=a=>({wechat_work:"企业微信",dingtalk:"钉钉",feishu:"飞书",slack:"Slack",discord:"Discord",telegram:"Telegram",bark:"Bark",smtp:"邮件通知",custom:"自定义"})[a]||a,We=a=>({wechat_work:"fab fa-weixin text-green-600",dingtalk:"fas fa-comment-dots text-blue-500",feishu:"fas fa-dove text-blue-600",slack:"fab fa-slack text-purple-600",discord:"fab fa-discord text-indigo-600",telegram:"fab fa-telegram-plane text-sky-500",bark:"fas fa-bell text-orange-500",smtp:"fas fa-envelope text-blue-600",custom:"fas fa-webhook text-gray-600"})[a]||"fas fa-bell",fe=a=>({wechat_work:"请在企业微信群机器人设置中获取Webhook地址",dingtalk:"请在钉钉群机器人设置中获取Webhook地址",feishu:"请在飞书群机器人设置中获取Webhook地址",slack:"请在Slack应用的Incoming Webhooks中获取地址",discord:"请在Discord服务器的集成设置中创建Webhook",telegram:"使用 @BotFather 创建机器人并复制 Token，Chat ID 可通过 @userinfobot 或相关工具获取",bark:"请在Bark App中查看您的设备密钥",smtp:"请配置SMTP服务器信息，支持Gmail、QQ邮箱等",custom:"请输入完整的Webhook接收地址"})[a]||"",Fe=a=>a?a.length<=12?a:`${a.slice(0,6)}...${a.slice(-4)}`:"",ze=a=>({accountAnomaly:"账号异常",quotaWarning:"配额警告",systemError:"系统错误",securityAlert:"安全警报",rateLimitRecovery:"限流恢复",test:"测试通知"})[a]||a,Ke=a=>({accountAnomaly:"账号状态异常、认证失败等",quotaWarning:"API调用配额不足警告",systemError:"系统运行错误和故障",securityAlert:"安全相关的警报通知",rateLimitRecovery:"限流状态恢复时发送提醒",test:"用于测试Webhook连接是否正常"})[a]||"",xe=async()=>{try{const a={siteName:b.value.siteName,siteIcon:b.value.siteIcon,siteIconData:b.value.siteIconData,showAdminButton:b.value.showAdminButton,apiStatsNotice:b.value.apiStatsNotice},t=await B.saveOemSettings(a);t&&t.success?f("OEM设置保存成功","success"):f((t==null?void 0:t.message)||"保存失败","error")}catch{f("保存OEM设置失败","error")}},be=async()=>{if(await F("重置设置",`确定要重置为默认设置吗？

这将清除所有自定义的网站名称和图标设置。`,"重置","取消","warning"))try{const a=await B.resetOemSettings();a&&a.success?f("已重置为默认设置","success"):f("重置失败","error")}catch{f("重置失败","error")}},pe=async a=>{const t=a.target.files[0];if(!t)return;const r=B.validateIconFile(t);if(!r.isValid){r.errors.forEach(y=>f(y,"error"));return}try{const y=await B.fileToBase64(t);b.value.siteIconData=y}catch{f("文件读取失败","error")}a.target.value=""},ye=()=>{b.value.siteIcon="",b.value.siteIconData=""},ve=()=>{console.warn("Icon failed to load")},le=B.formatDateTime;return(a,t)=>(d(),n(X,null,[e("div",zt,[e("div",Kt,[t[147]||(t[147]=e("div",{class:"mb-4 sm:mb-6"},[e("h3",{class:"mb-1 text-lg font-bold text-gray-900 dark:text-gray-100 sm:mb-2 sm:text-xl"}," 系统设置 "),e("p",{class:"text-sm text-gray-600 dark:text-gray-400 sm:text-base"},"网站定制和通知配置")],-1)),e("div",Gt,[e("nav",_t,[e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",S.value==="branding"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[0]||(t[0]=r=>S.value="branding")},t[52]||(t[52]=[e("i",{class:"fas fa-palette mr-2"},null,-1),o(" 品牌设置 ",-1)]),2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",S.value==="webhook"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[1]||(t[1]=r=>S.value="webhook")},t[53]||(t[53]=[e("i",{class:"fas fa-bell mr-2"},null,-1),o(" 通知设置 ",-1)]),2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",S.value==="claude"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[2]||(t[2]=r=>S.value="claude")},t[54]||(t[54]=[e("i",{class:"fas fa-robot mr-2"},null,-1),o(" Claude 转发 ",-1)]),2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",S.value==="serviceRates"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[3]||(t[3]=r=>S.value="serviceRates")},t[55]||(t[55]=[e("i",{class:"fas fa-balance-scale mr-2"},null,-1),o(" 服务倍率 ",-1)]),2),e("button",{class:A(["border-b-2 pb-2 text-sm font-medium transition-colors",S.value==="modelPricing"?"border-blue-500 text-blue-600 dark:border-blue-400 dark:text-blue-400":"border-transparent text-gray-500 hover:border-gray-300 hover:text-gray-700 dark:text-gray-400 dark:hover:text-gray-300"]),onClick:t[4]||(t[4]=r=>S.value="modelPricing")},t[56]||(t[56]=[e("i",{class:"fas fa-coins mr-2"},null,-1),o(" 模型价格 ",-1)]),2)])]),p($)?(d(),n("div",Ht,t[57]||(t[57]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载设置...",-1)]))):(d(),n("div",Yt,[c(e("div",null,[e("div",Jt,[e("table",Xt,[e("tbody",Zt,[e("tr",ea,[t[59]||(t[59]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-blue-500 to-blue-600"},[e("i",{class:"fas fa-font text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 网站名称 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"品牌标识")])])],-1)),e("td",ta,[c(e("input",{"onUpdate:modelValue":t[5]||(t[5]=r=>p(b).siteName=r),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"Claude Relay Service",type:"text"},null,512),[[k,p(b).siteName]]),t[58]||(t[58]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 将显示在浏览器标题和页面头部 ",-1))])]),e("tr",aa,[t[64]||(t[64]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-purple-500 to-purple-600"},[e("i",{class:"fas fa-image text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 网站图标 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"Favicon")])])],-1)),e("td",ra,[e("div",sa,[p(b).siteIconData||p(b).siteIcon?(d(),n("div",la,[e("img",{alt:"图标预览",class:"h-8 w-8",src:p(b).siteIconData||p(b).siteIcon,onError:ve},null,40,oa),t[61]||(t[61]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前图标",-1)),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:ye},t[60]||(t[60]=[e("i",{class:"fas fa-trash mr-1"},null,-1),o("删除 ",-1)]))])):v("",!0),e("div",null,[e("input",{ref_key:"iconFileInput",ref:W,accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:pe},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[6]||(t[6]=r=>a.$refs.iconFileInput.click())},t[62]||(t[62]=[e("i",{class:"fas fa-upload mr-2"},null,-1),o(" 上传图标 ",-1)])),t[63]||(t[63]=e("span",{class:"ml-3 text-xs text-gray-500 dark:text-gray-400"},"支持 .ico, .png, .jpg, .svg 格式，最大 350KB",-1))])])])]),e("tr",na,[t[67]||(t[67]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-indigo-500 to-purple-600"},[e("i",{class:"fas fa-eye-slash text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 管理入口 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"登录按钮显示")])])],-1)),e("td",da,[e("div",ia,[e("label",ua,[c(e("input",{"onUpdate:modelValue":t[7]||(t[7]=r=>z.value=r),class:"peer sr-only",type:"checkbox"},null,512),[[N,z.value]]),t[65]||(t[65]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",ga,x(z.value?"隐藏登录按钮":"显示登录按钮"),1)])]),t[66]||(t[66]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 隐藏后，用户需要直接访问 /admin/login 页面登录 ",-1))])]),e("tr",ca,[t[71]||(t[71]=e("td",{class:"w-48 whitespace-nowrap px-6 py-4"},[e("div",{class:"flex items-center"},[e("div",{class:"mr-3 flex h-8 w-8 items-center justify-center rounded-lg bg-gradient-to-br from-amber-500 to-orange-600"},[e("i",{class:"fas fa-bell text-xs text-white"})]),e("div",null,[e("div",{class:"text-sm font-semibold text-gray-900 dark:text-gray-100"}," 统计页通知 "),e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},"API Stats")])])],-1)),e("td",fa,[e("div",xa,[e("label",ba,[c(e("input",{"onUpdate:modelValue":t[8]||(t[8]=r=>p(b).apiStatsNotice.enabled=r),class:"peer sr-only",type:"checkbox"},null,512),[[N,p(b).apiStatsNotice.enabled]]),t[68]||(t[68]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",pa,x(p(b).apiStatsNotice.enabled?"已启用":"已禁用"),1)])]),p(b).apiStatsNotice.enabled?(d(),n("div",ya,[e("div",null,[t[69]||(t[69]=e("label",{class:"mb-1 block text-xs text-gray-500 dark:text-gray-400"}," 标题 ",-1)),c(e("input",{"onUpdate:modelValue":t[9]||(t[9]=r=>p(b).apiStatsNotice.title=r),class:"form-input w-full max-w-md dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"通知标题",type:"text"},null,512),[[k,p(b).apiStatsNotice.title]])]),e("div",null,[t[70]||(t[70]=e("label",{class:"mb-1 block text-xs text-gray-500 dark:text-gray-400"}," 内容 ",-1)),c(e("textarea",{"onUpdate:modelValue":t[10]||(t[10]=r=>p(b).apiStatsNotice.content=r),class:"form-input w-full max-w-md resize-none dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"2000",placeholder:"通知内容（支持换行）",rows:"3"},null,512),[[k,p(b).apiStatsNotice.content]])])])):v("",!0)])]),e("tr",null,[e("td",va,[e("div",ma,[e("div",ka,[e("button",{class:A(["btn btn-primary px-6 py-3",{"cursor-not-allowed opacity-50":p(R)}]),disabled:p(R),onClick:xe},[p(R)?(d(),n("div",wa)):(d(),n("i",Ca)),o(" "+x(p(R)?"保存中...":"保存设置"),1)],10,ha),e("button",{class:"btn bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:p(R),onClick:be},t[72]||(t[72]=[e("i",{class:"fas fa-undo mr-2"},null,-1),o(" 重置为默认 ",-1)]),8,Sa)]),p(b).updatedAt?(d(),n("div",Ta,[t[73]||(t[73]=e("i",{class:"fas fa-clock mr-1"},null,-1)),o(" 最后更新："+x(p(le)(p(b).updatedAt)),1)])):v("",!0)])])])])])]),e("div",Ma,[e("div",Ua,[t[74]||(t[74]=V('<div class="mb-3 flex items-center gap-3" data-v-3d9302c4><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-blue-500 to-cyan-600 text-white shadow-md" data-v-3d9302c4><i class="fas fa-tag" data-v-3d9302c4></i></div><div data-v-3d9302c4><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-3d9302c4>站点名称</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-3d9302c4>自定义您的站点品牌名称</p></div></div>',1)),c(e("input",{"onUpdate:modelValue":t[11]||(t[11]=r=>p(b).siteName=r),class:"form-input w-full dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",maxlength:"100",placeholder:"Claude Relay Service",type:"text"},null,512),[[k,p(b).siteName]])]),e("div",Aa,[t[78]||(t[78]=V('<div class="mb-3 flex items-center gap-3" data-v-3d9302c4><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-purple-500 to-pink-600 text-white shadow-md" data-v-3d9302c4><i class="fas fa-image" data-v-3d9302c4></i></div><div data-v-3d9302c4><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-3d9302c4>站点图标</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-3d9302c4> 上传自定义图标或输入图标URL </p></div></div>',1)),e("div",Ia,[p(b).siteIconData||p(b).siteIcon?(d(),n("div",Ba,[e("img",{alt:"图标预览",class:"h-8 w-8",src:p(b).siteIconData||p(b).siteIcon,onError:ve},null,40,Ra),t[75]||(t[75]=e("span",{class:"text-sm text-gray-600 dark:text-gray-400"},"当前图标",-1)),e("button",{class:"rounded-lg px-3 py-1 font-medium text-red-600 transition-colors hover:bg-red-50 hover:text-red-900",onClick:ye}," 删除 ")])):v("",!0),e("div",null,[e("input",{ref:"iconFileInputMobile",accept:".ico,.png,.jpg,.jpeg,.svg",class:"hidden",type:"file",onChange:pe},null,544),e("button",{class:"btn btn-success px-4 py-2",onClick:t[12]||(t[12]=r=>a.$refs.iconFileInputMobile.click())},t[76]||(t[76]=[e("i",{class:"fas fa-upload mr-2"},null,-1),o(" 上传图标 ",-1)])),t[77]||(t[77]=e("p",{class:"mt-2 text-xs text-gray-500 dark:text-gray-400"}," 支持 .ico, .png, .jpg, .svg 格式，最大 350KB ",-1))])])]),e("div",Ea,[t[81]||(t[81]=V('<div class="mb-3 flex items-center gap-3" data-v-3d9302c4><div class="flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-xl bg-gradient-to-br from-indigo-500 to-purple-600 text-white shadow-md" data-v-3d9302c4><i class="fas fa-eye-slash" data-v-3d9302c4></i></div><div data-v-3d9302c4><h3 class="text-base font-semibold text-gray-900 dark:text-gray-100" data-v-3d9302c4>管理入口</h3><p class="text-sm text-gray-500 dark:text-gray-400" data-v-3d9302c4>控制登录按钮在首页的显示</p></div></div>',1)),e("div",Da,[e("label",Va,[c(e("input",{"onUpdate:modelValue":t[13]||(t[13]=r=>z.value=r),class:"peer sr-only",type:"checkbox"},null,512),[[N,z.value]]),t[79]||(t[79]=e("div",{class:"peer relative h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1)),e("span",$a,x(z.value?"隐藏登录按钮":"显示登录按钮"),1)]),t[80]||(t[80]=e("p",{class:"text-xs text-gray-500 dark:text-gray-400"}," 隐藏后，用户需要直接访问 /admin/login 页面登录 ",-1))])]),e("div",Qa,[e("div",Pa,[e("button",{class:A(["btn btn-primary w-full px-6 py-3",{"cursor-not-allowed opacity-50":p(R)}]),disabled:p(R),onClick:xe},[p(R)?(d(),n("div",ja)):(d(),n("i",La)),o(" "+x(p(R)?"保存中...":"保存设置"),1)],10,qa),e("button",{class:"btn w-full bg-gray-100 px-6 py-3 text-gray-700 hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-300 dark:hover:bg-gray-600",disabled:p(R),onClick:be},t[82]||(t[82]=[e("i",{class:"fas fa-undo mr-2"},null,-1),o(" 重置为默认 ",-1)]),8,Na),p(b).updatedAt?(d(),n("div",Oa,[t[83]||(t[83]=e("i",{class:"fas fa-clock mr-1"},null,-1)),o(" 上次更新: "+x(p(le)(p(b).updatedAt)),1)])):v("",!0)])])])],512),[[ae,S.value==="branding"]]),c(e("div",null,[e("div",Wa,[e("div",Fa,[t[85]||(t[85]=e("div",null,[e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},"启用通知"),e("p",{class:"mt-1 text-sm text-gray-600 dark:text-gray-400"}," 开启后，系统将按配置发送通知到指定平台 ")],-1)),e("label",za,[c(e("input",{"onUpdate:modelValue":t[14]||(t[14]=r=>u.value.enabled=r),class:"peer sr-only",type:"checkbox",onChange:te},null,544),[[N,u.value.enabled]]),t[84]||(t[84]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-600 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1))])])]),e("div",Ka,[t[87]||(t[87]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},"通知类型",-1)),e("div",Ga,[(d(!0),n(X,null,re(u.value.notificationTypes,(r,y)=>(d(),n("div",{key:y,class:"flex items-center justify-between"},[e("div",null,[e("span",_a,x(ze(y)),1),e("span",Ha,x(Ke(y)),1)]),e("label",Ya,[c(e("input",{"onUpdate:modelValue":w=>u.value.notificationTypes[y]=w,class:"peer sr-only",type:"checkbox",onChange:te},null,40,Ja),[[N,u.value.notificationTypes[y]]]),t[86]||(t[86]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))])]))),128))])]),e("div",Xa,[e("div",Za,[t[89]||(t[89]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},"通知平台",-1)),e("button",{class:"rounded-lg bg-blue-600 px-4 py-2 text-sm font-medium text-white transition-colors hover:bg-blue-700",onClick:t[15]||(t[15]=r=>q.value=!0)},t[88]||(t[88]=[e("i",{class:"fas fa-plus mr-2"},null,-1),o(" 添加平台 ",-1)]))]),u.value.platforms&&u.value.platforms.length>0?(d(),n("div",er,[(d(!0),n(X,null,re(u.value.platforms,r=>(d(),n("div",{key:r.id,class:"rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[e("div",tr,[e("div",ar,[e("div",rr,[e("i",{class:A(["mr-3 text-xl",We(r.type)])},null,2),e("div",null,[e("h3",sr,x(r.name||ce(r.type)),1),e("p",lr,x(ce(r.type)),1)])]),e("div",or,[r.type!=="smtp"&&r.type!=="telegram"?(d(),n("div",nr,[t[90]||(t[90]=e("i",{class:"fas fa-link mr-2"},null,-1)),e("span",dr,x(r.url),1)])):v("",!0),r.type==="telegram"?(d(),n("div",ir,[t[91]||(t[91]=e("i",{class:"fas fa-comments mr-2"},null,-1)),e("span",ur,"Chat ID: "+x(r.chatId||"未配置"),1)])):v("",!0),r.type==="telegram"&&r.botToken?(d(),n("div",gr,[t[92]||(t[92]=e("i",{class:"fas fa-key mr-2"},null,-1)),e("span",cr,"Token: "+x(Fe(r.botToken)),1)])):v("",!0),r.type==="telegram"&&r.apiBaseUrl?(d(),n("div",fr,[t[93]||(t[93]=e("i",{class:"fas fa-globe mr-2"},null,-1)),e("span",xr,"API: "+x(r.apiBaseUrl),1)])):v("",!0),r.type==="telegram"&&r.proxyUrl?(d(),n("div",br,[t[94]||(t[94]=e("i",{class:"fas fa-route mr-2"},null,-1)),e("span",pr,"代理: "+x(r.proxyUrl),1)])):v("",!0),r.type==="smtp"&&r.to?(d(),n("div",yr,[t[95]||(t[95]=e("i",{class:"fas fa-envelope mr-2"},null,-1)),e("span",vr,x(Array.isArray(r.to)?r.to.join(", "):r.to),1)])):v("",!0),r.enableSign?(d(),n("div",mr,t[96]||(t[96]=[e("i",{class:"fas fa-shield-alt mr-2"},null,-1),e("span",null,"已启用签名验证",-1)]))):v("",!0)])]),e("div",kr,[e("label",hr,[e("input",{checked:r.enabled,class:"peer sr-only",type:"checkbox",onChange:y=>je(r.id)},null,40,wr),t[97]||(t[97]=e("div",{class:"peer h-5 w-9 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-4 after:w-4 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-green-600 peer-checked:after:translate-x-full peer-checked:after:border-white dark:border-gray-600 dark:bg-gray-700"},null,-1))]),e("button",{class:"rounded-lg bg-blue-100 p-2 text-blue-600 transition-colors hover:bg-blue-200 dark:bg-blue-900 dark:text-blue-400 dark:hover:bg-blue-800",title:"测试连接",onClick:y=>Le(r)},t[98]||(t[98]=[e("i",{class:"fas fa-vial"},null,-1)]),8,Cr),e("button",{class:"rounded-lg bg-gray-100 p-2 text-gray-600 transition-colors hover:bg-gray-200 dark:bg-gray-700 dark:text-gray-400 dark:hover:bg-gray-600",title:"编辑",onClick:y=>Pe(r)},t[99]||(t[99]=[e("i",{class:"fas fa-edit"},null,-1)]),8,Sr),e("button",{class:"rounded-lg bg-red-100 p-2 text-red-600 transition-colors hover:bg-red-200 dark:bg-red-900 dark:text-red-400 dark:hover:bg-red-800",title:"删除",onClick:y=>qe(r.id)},t[100]||(t[100]=[e("i",{class:"fas fa-trash"},null,-1)]),8,Tr)])])]))),128))])):(d(),n("div",Mr,' 暂无配置的通知平台，请点击"添加平台"按钮添加 '))]),e("div",Ur,[t[104]||(t[104]=e("h2",{class:"mb-4 text-lg font-semibold text-gray-800 dark:text-gray-200"},"高级设置",-1)),e("div",Ar,[e("div",null,[t[101]||(t[101]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 最大重试次数 ",-1)),c(e("input",{"onUpdate:modelValue":t[16]||(t[16]=r=>u.value.retrySettings.maxRetries=r),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10",min:"0",type:"number",onChange:te},null,544),[[k,u.value.retrySettings.maxRetries,void 0,{number:!0}]])]),e("div",null,[t[102]||(t[102]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 重试延迟 (毫秒) ",-1)),c(e("input",{"onUpdate:modelValue":t[17]||(t[17]=r=>u.value.retrySettings.retryDelay=r),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10000",min:"100",step:"100",type:"number",onChange:te},null,544),[[k,u.value.retrySettings.retryDelay,void 0,{number:!0}]])]),e("div",null,[t[103]||(t[103]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"}," 超时时间 (毫秒) ",-1)),c(e("input",{"onUpdate:modelValue":t[18]||(t[18]=r=>u.value.retrySettings.timeout=r),class:"mt-1 block w-full rounded-lg border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 dark:border-gray-600 dark:bg-gray-700 dark:text-white sm:text-sm",max:"30000",min:"1000",step:"1000",type:"number",onChange:te},null,544),[[k,u.value.retrySettings.timeout,void 0,{number:!0}]])])])]),e("div",{class:"mt-6 text-center"},[e("button",{class:"rounded-lg bg-green-600 px-6 py-3 text-white shadow-lg transition-all hover:bg-green-700 hover:shadow-xl",onClick:Oe},t[105]||(t[105]=[e("i",{class:"fas fa-paper-plane mr-2"},null,-1),o(" 发送测试通知 ",-1)]))])],512),[[ae,S.value==="webhook"]]),c(e("div",null,[i.value?(d(),n("div",Ir,t[106]||(t[106]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载配置...",-1)]))):(d(),n("div",Br,[e("div",Rr,[e("div",Er,[t[108]||(t[108]=V('<div data-v-3d9302c4><div class="flex items-center" data-v-3d9302c4><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-orange-500 to-amber-600 text-white shadow-lg" data-v-3d9302c4><i class="fas fa-terminal" data-v-3d9302c4></i></div><div data-v-3d9302c4><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-3d9302c4> 仅允许 Claude Code 客户端 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-3d9302c4> 启用后，所有 <code class="rounded bg-gray-100 px-1 dark:bg-gray-700" data-v-3d9302c4>/api/v1/messages</code> 和 <code class="rounded bg-gray-100 px-1 dark:bg-gray-700" data-v-3d9302c4>/claude/v1/messages</code> 端点将强制验证 Claude Code CLI 客户端 </p></div></div></div>',1)),e("label",Dr,[c(e("input",{"onUpdate:modelValue":t[19]||(t[19]=r=>l.value.claudeCodeOnlyEnabled=r),class:"peer sr-only",type:"checkbox",onChange:j},null,544),[[N,l.value.claudeCodeOnlyEnabled]]),t[107]||(t[107]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-orange-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-orange-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-orange-800"},null,-1))])]),t[109]||(t[109]=V('<div class="mt-4 rounded-lg bg-amber-50 p-4 dark:bg-amber-900/20" data-v-3d9302c4><div class="flex" data-v-3d9302c4><i class="fas fa-info-circle mt-0.5 text-amber-500" data-v-3d9302c4></i><div class="ml-3" data-v-3d9302c4><p class="text-sm text-amber-700 dark:text-amber-300" data-v-3d9302c4> 此设置与 API Key 级别的客户端限制是 <strong data-v-3d9302c4>OR 逻辑</strong>：全局启用或 API Key 设置中启用，都会执行 Claude Code 验证。 </p></div></div></div>',1))]),e("div",Vr,[e("div",$r,[t[111]||(t[111]=V('<div data-v-3d9302c4><div class="flex items-center" data-v-3d9302c4><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-purple-500 to-indigo-600 text-white shadow-lg" data-v-3d9302c4><i class="fas fa-link" data-v-3d9302c4></i></div><div data-v-3d9302c4><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-3d9302c4> 强制会话绑定 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-3d9302c4> 启用后，系统会将原始会话 ID 绑定到首次使用的账户，确保上下文的一致性 </p></div></div></div>',1)),e("label",Qr,[c(e("input",{"onUpdate:modelValue":t[20]||(t[20]=r=>l.value.globalSessionBindingEnabled=r),class:"peer sr-only",type:"checkbox",onChange:j},null,544),[[N,l.value.globalSessionBindingEnabled]]),t[110]||(t[110]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-purple-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-purple-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-purple-800"},null,-1))])]),l.value.globalSessionBindingEnabled?(d(),n("div",Pr,[e("div",null,[t[112]||(t[112]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-clock mr-2 text-gray-400"}),o(" 绑定有效期（天） ")],-1)),c(e("input",{"onUpdate:modelValue":t[21]||(t[21]=r=>l.value.sessionBindingTtlDays=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"365",min:"1",placeholder:"30",type:"number",onChange:j},null,544),[[k,l.value.sessionBindingTtlDays,void 0,{number:!0}]]),t[113]||(t[113]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 会话绑定到账户后的有效时间，过期后会自动解除绑定 ",-1))]),e("div",null,[t[114]||(t[114]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-exclamation-triangle mr-2 text-gray-400"}),o(" 旧会话污染提示 ")],-1)),c(e("textarea",{"onUpdate:modelValue":t[22]||(t[22]=r=>l.value.sessionBindingErrorMessage=r),class:"mt-1 block w-full rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-purple-500 focus:outline-none focus:ring-2 focus:ring-purple-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",placeholder:"你的本地session已污染，请清理后使用。",rows:"2",onChange:j},null,544),[[k,l.value.sessionBindingErrorMessage]]),t[115]||(t[115]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 当检测到为旧的sessionId且未在系统中有调度记录时提示，返回给客户端的错误消息 ",-1))])])):v("",!0),t[116]||(t[116]=V('<div class="mt-4 rounded-lg bg-purple-50 p-4 dark:bg-purple-900/20" data-v-3d9302c4><div class="flex" data-v-3d9302c4><i class="fas fa-lightbulb mt-0.5 text-purple-500" data-v-3d9302c4></i><div class="ml-3" data-v-3d9302c4><p class="text-sm text-purple-700 dark:text-purple-300" data-v-3d9302c4><strong data-v-3d9302c4>工作原理：</strong>系统会提取请求中的原始 session ID （来自 <code class="rounded bg-purple-100 px-1 dark:bg-purple-800" data-v-3d9302c4>metadata.user_id</code>）， 并将其与首次调度的账户绑定。后续使用相同 session ID 的请求将自动路由到同一账户。 </p><p class="mt-2 text-sm text-purple-700 dark:text-purple-300" data-v-3d9302c4><strong data-v-3d9302c4>新会话识别：</strong>如果绑定会话历史中没有该sessionId但请求中 <code class="rounded bg-purple-100 px-1 dark:bg-purple-800" data-v-3d9302c4>messages.length &gt; 1</code>， 系统会认为这是一个污染的会话并拒绝请求。 </p></div></div></div>',1))]),e("div",qr,[e("div",jr,[t[118]||(t[118]=V('<div data-v-3d9302c4><div class="flex items-center" data-v-3d9302c4><div class="mr-3 flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-cyan-500 to-teal-600 text-white shadow-lg" data-v-3d9302c4><i class="fas fa-list-ol" data-v-3d9302c4></i></div><div data-v-3d9302c4><h2 class="text-lg font-semibold text-gray-800 dark:text-gray-200" data-v-3d9302c4> 用户消息串行队列 </h2><p class="mt-1 text-sm text-gray-600 dark:text-gray-400" data-v-3d9302c4> 启用后，同一账户的用户消息请求将串行执行，并在请求之间添加延迟，防止触发上游限流 </p></div></div></div>',1)),e("label",Lr,[c(e("input",{"onUpdate:modelValue":t[23]||(t[23]=r=>l.value.userMessageQueueEnabled=r),class:"peer sr-only",type:"checkbox",onChange:j},null,544),[[N,l.value.userMessageQueueEnabled]]),t[117]||(t[117]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-teal-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-teal-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-teal-800"},null,-1))])]),l.value.userMessageQueueEnabled?(d(),n("div",Nr,[e("div",null,[t[119]||(t[119]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-hourglass-half mr-2 text-gray-400"}),o(" 请求间隔（毫秒） ")],-1)),c(e("input",{"onUpdate:modelValue":t[24]||(t[24]=r=>l.value.userMessageQueueDelayMs=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10000",min:"0",placeholder:"200",type:"number",onChange:j},null,544),[[k,l.value.userMessageQueueDelayMs,void 0,{number:!0}]]),t[120]||(t[120]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 同一账户的用户消息请求之间的最小间隔时间（0-10000毫秒） ",-1))]),e("div",null,[t[121]||(t[121]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-stopwatch mr-2 text-gray-400"}),o(" 队列超时（毫秒） ")],-1)),c(e("input",{"onUpdate:modelValue":t[25]||(t[25]=r=>l.value.userMessageQueueTimeoutMs=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-teal-500 focus:outline-none focus:ring-2 focus:ring-teal-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"300000",min:"1000",placeholder:"30000",type:"number",onChange:j},null,544),[[k,l.value.userMessageQueueTimeoutMs,void 0,{number:!0}]]),t[122]||(t[122]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 请求在队列中等待的最大时间，超时将返回 503 错误（1000-300000毫秒） ",-1))])])):v("",!0),t[123]||(t[123]=V('<div class="mt-4 rounded-lg bg-teal-50 p-4 dark:bg-teal-900/20" data-v-3d9302c4><div class="flex" data-v-3d9302c4><i class="fas fa-info-circle mt-0.5 text-teal-500" data-v-3d9302c4></i><div class="ml-3" data-v-3d9302c4><p class="text-sm text-teal-700 dark:text-teal-300" data-v-3d9302c4><strong data-v-3d9302c4>工作原理：</strong>系统检测请求中最后一条消息的 <code class="rounded bg-teal-100 px-1 dark:bg-teal-800" data-v-3d9302c4>role</code> 是否为 <code class="rounded bg-teal-100 px-1 dark:bg-teal-800" data-v-3d9302c4>user</code>。用户消息请求需要排队串行执行，而工具调用结果、助手消息续传等不受此限制。 </p></div></div></div>',1))]),e("div",Or,[e("div",Wr,[t[125]||(t[125]=V('<div class="flex items-center" data-v-3d9302c4><div class="flex h-12 w-12 items-center justify-center rounded-lg bg-gradient-to-r from-blue-500 to-cyan-500 text-white shadow-lg" data-v-3d9302c4><i class="fas fa-layer-group text-xl" data-v-3d9302c4></i></div><div class="ml-4" data-v-3d9302c4><h4 class="text-lg font-semibold text-gray-900 dark:text-white" data-v-3d9302c4> 并发请求排队 </h4><p class="text-sm text-gray-500 dark:text-gray-400" data-v-3d9302c4> 当 API Key 并发请求超限时进入队列等待，而非直接拒绝 </p></div></div>',1)),e("label",Fr,[c(e("input",{"onUpdate:modelValue":t[26]||(t[26]=r=>l.value.concurrentRequestQueueEnabled=r),class:"peer sr-only",type:"checkbox",onChange:j},null,544),[[N,l.value.concurrentRequestQueueEnabled]]),t[124]||(t[124]=e("div",{class:"peer h-6 w-11 rounded-full bg-gray-200 after:absolute after:left-[2px] after:top-[2px] after:h-5 after:w-5 after:rounded-full after:border after:border-gray-300 after:bg-white after:transition-all after:content-[''] peer-checked:bg-blue-500 peer-checked:after:translate-x-full peer-checked:after:border-white peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 dark:border-gray-600 dark:bg-gray-700 dark:peer-focus:ring-blue-800"},null,-1))])]),l.value.concurrentRequestQueueEnabled?(d(),n("div",zr,[e("div",null,[t[126]||(t[126]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-list-ol mr-2 text-gray-400"}),o(" 固定最小排队数 ")],-1)),c(e("input",{"onUpdate:modelValue":t[27]||(t[27]=r=>l.value.concurrentRequestQueueMaxSize=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"100",min:"1",placeholder:"3",type:"number",onChange:j},null,544),[[k,l.value.concurrentRequestQueueMaxSize,void 0,{number:!0}]]),t[127]||(t[127]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 最大排队数的固定最小值（1-100） ",-1))]),e("div",null,[t[128]||(t[128]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-times mr-2 text-gray-400"}),o(" 排队数倍数 ")],-1)),c(e("input",{"onUpdate:modelValue":t[28]||(t[28]=r=>l.value.concurrentRequestQueueMaxSizeMultiplier=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"10",min:"0",placeholder:"1",step:"0.5",type:"number",onChange:j},null,544),[[k,l.value.concurrentRequestQueueMaxSizeMultiplier,void 0,{number:!0}]]),t[129]||(t[129]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 最大排队数 = MAX(倍数 × 并发限制, 固定值)，设为 0 则仅使用固定值 ",-1))]),e("div",null,[t[130]||(t[130]=e("label",{class:"block text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-stopwatch mr-2 text-gray-400"}),o(" 排队超时时间（毫秒） ")],-1)),c(e("input",{"onUpdate:modelValue":t[29]||(t[29]=r=>l.value.concurrentRequestQueueTimeoutMs=r),class:"mt-1 block w-full max-w-xs rounded-lg border border-gray-300 bg-white px-3 py-2 shadow-sm focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-500 dark:bg-gray-700 dark:text-white sm:text-sm",max:"300000",min:"5000",placeholder:"10000",type:"number",onChange:j},null,544),[[k,l.value.concurrentRequestQueueTimeoutMs,void 0,{number:!0}]]),t[131]||(t[131]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 请求在排队中等待的最大时间，超时将返回 429 错误（5秒-5分钟，默认10秒） ",-1))])])):v("",!0),t[132]||(t[132]=V('<div class="mt-4 rounded-lg bg-blue-50 p-4 dark:bg-blue-900/20" data-v-3d9302c4><div class="flex" data-v-3d9302c4><i class="fas fa-info-circle mt-0.5 text-blue-500" data-v-3d9302c4></i><div class="ml-3" data-v-3d9302c4><p class="text-sm text-blue-700 dark:text-blue-300" data-v-3d9302c4><strong data-v-3d9302c4>工作原理：</strong>当 API Key 的并发请求超过 <code class="rounded bg-blue-100 px-1 dark:bg-blue-800" data-v-3d9302c4>concurrencyLimit</code> 时，超限请求会进入队列等待而非直接返回 429。适合 Claude Code Agent 并行工具调用场景。 </p></div></div></div>',1))]),l.value.updatedAt?(d(),n("div",Kr,[t[135]||(t[135]=e("i",{class:"fas fa-history mr-2"},null,-1)),o(" 最后更新："+x(p(le)(l.value.updatedAt))+" ",1),l.value.updatedBy?(d(),n("span",Gr,[t[133]||(t[133]=o(" 由 ",-1)),e("strong",null,x(l.value.updatedBy),1),t[134]||(t[134]=o(" 修改 ",-1))])):v("",!0)])):v("",!0)]))],512),[[ae,S.value==="claude"]]),c(e("div",null,[m.value?(d(),n("div",_r,t[136]||(t[136]=[e("div",{class:"loading-spinner mx-auto mb-4"},null,-1),e("p",{class:"text-gray-500 dark:text-gray-400"},"正在加载配置...",-1)]))):(d(),n("div",Hr,[e("div",Yr,[e("div",Jr,[t[140]||(t[140]=e("div",{class:"mr-4 flex h-10 w-10 flex-shrink-0 items-center justify-center rounded-full bg-blue-500 text-white"},[e("i",{class:"fas fa-info"})],-1)),e("div",null,[t[139]||(t[139]=e("h3",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"}," 服务倍率说明 ",-1)),e("p",Xr,[t[137]||(t[137]=o(" 服务倍率用于计算不同服务的计费费用。以 ",-1)),e("strong",null,x(M.value.baseService||"claude"),1),t[138]||(t[138]=o(" 为基准（倍率 1.0），其他服务按倍率换算。例如：Gemini 倍率 0.5 表示消耗 $1 只扣除 $0.5 额度。 ",-1))])])])]),e("div",Zr,[e("div",es,[t[142]||(t[142]=e("h2",{class:"text-lg font-semibold text-gray-800 dark:text-gray-200"},[e("i",{class:"fas fa-sliders-h mr-2 text-blue-500"}),o(" 倍率配置 ")],-1)),e("button",{class:"rounded-lg bg-blue-500 px-4 py-2 text-sm font-medium text-white hover:bg-blue-600 disabled:opacity-50",disabled:Y.value,onClick:Re},[t[141]||(t[141]=e("i",{class:"fas fa-save mr-2"},null,-1)),o(" "+x(Y.value?"保存中...":"保存配置"),1)],8,ts)]),e("div",as,[(d(!0),n(X,null,re(M.value.rates,(r,y)=>(d(),n("div",{key:y,class:"flex items-center justify-between rounded-lg border border-gray-200 p-4 dark:border-gray-700"},[e("div",rs,[e("div",{class:A(["mr-3 flex h-10 w-10 items-center justify-center rounded-lg",De(y)])},[e("i",{class:A(["text-white",Ee(y)])},null,2)],2),e("div",null,[e("div",ss,x(Ve(y)),1),e("div",ls,[o(x(y)+" ",1),y===M.value.baseService?(d(),n("span",os," 基准服务 ")):v("",!0)])])]),e("div",ns,[c(e("input",{"onUpdate:modelValue":w=>M.value.rates[y]=w,class:"w-24 rounded-lg border border-gray-300 px-3 py-2 text-center text-sm dark:border-gray-600 dark:bg-gray-700 dark:text-gray-200",max:"10",min:"0.1",step:"0.1",type:"number"},null,8,ds),[[k,M.value.rates[y],void 0,{number:!0}]]),t[143]||(t[143]=e("span",{class:"text-sm text-gray-500 dark:text-gray-400"},"倍",-1))])]))),128))]),M.value.updatedAt?(d(),n("div",is,[t[146]||(t[146]=e("i",{class:"fas fa-history mr-2"},null,-1)),o(" 最后更新："+x(p(le)(M.value.updatedAt))+" ",1),M.value.updatedBy?(d(),n("span",us,[t[144]||(t[144]=o(" 由 ",-1)),e("strong",null,x(M.value.updatedBy),1),t[145]||(t[145]=o(" 修改 ",-1))])):v("",!0)])):v("",!0)])]))],512),[[ae,S.value==="serviceRates"]]),c(e("div",null,[ne(Ft)],512),[[ae,S.value==="modelPricing"]])]))])]),q.value?(d(),n("div",{key:0,class:"fixed inset-0 z-50 flex items-center justify-center bg-black/60 backdrop-blur-sm transition-all duration-300 ease-out",onClick:se},[e("div",{class:"relative mx-4 w-full max-w-2xl overflow-hidden rounded-2xl bg-white shadow-2xl transition-all duration-300 ease-out dark:bg-gray-800",onClick:t[51]||(t[51]=Xe(()=>{},["stop"]))},[e("div",gs,[e("div",cs,[e("div",fs,[t[148]||(t[148]=e("div",{class:"flex h-10 w-10 items-center justify-center rounded-full bg-gradient-to-br from-blue-500 to-indigo-600 text-white shadow-lg"},[e("i",{class:"fas fa-bell"})],-1)),e("div",null,[e("h3",xs,x(Q.value?"编辑":"添加")+"通知平台 ",1),e("p",bs," 配置"+x(Q.value?"并更新":"新的")+"Webhook通知渠道 ",1)])]),e("button",{class:"rounded-lg p-2 text-gray-400 transition-colors hover:bg-gray-100 hover:text-gray-600 dark:hover:bg-gray-700 dark:hover:text-gray-300",onClick:se},t[149]||(t[149]=[e("i",{class:"fas fa-times text-lg"},null,-1)]))])]),e("div",ps,[e("div",ys,[e("div",null,[t[153]||(t[153]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-layer-group mr-2 text-gray-400"}),o(" 平台类型 ")],-1)),e("div",vs,[c(e("select",{"onUpdate:modelValue":t[30]||(t[30]=r=>s.value.type=r),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",disabled:Q.value},t[150]||(t[150]=[V('<option value="wechat_work" data-v-3d9302c4>🟢 企业微信</option><option value="dingtalk" data-v-3d9302c4>🔵 钉钉</option><option value="feishu" data-v-3d9302c4>🟦 飞书</option><option value="slack" data-v-3d9302c4>🟣 Slack</option><option value="discord" data-v-3d9302c4>🟪 Discord</option><option value="telegram" data-v-3d9302c4>✈️ Telegram</option><option value="bark" data-v-3d9302c4>🔔 Bark</option><option value="smtp" data-v-3d9302c4>📧 邮件通知</option><option value="custom" data-v-3d9302c4>⚙️ 自定义</option>',9)]),8,ms),[[oe,s.value.type]]),t[151]||(t[151]=e("div",{class:"pointer-events-none absolute inset-y-0 right-0 flex items-center pr-3"},[e("i",{class:"fas fa-chevron-down text-gray-400"})],-1))]),Q.value?(d(),n("p",ks,t[152]||(t[152]=[e("i",{class:"fas fa-info-circle mr-1"},null,-1),o(" 编辑模式下不能更改平台类型 ",-1)]))):v("",!0)]),e("div",null,[t[154]||(t[154]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-tag mr-2 text-gray-400"}),o(" 名称 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[31]||(t[31]=r=>s.value.name=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：运维群通知、开发测试群",type:"text"},null,512),[[k,s.value.name]])]),s.value.type!=="bark"&&s.value.type!=="smtp"&&s.value.type!=="telegram"?(d(),n("div",hs,[t[158]||(t[158]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-link mr-2 text-gray-400"}),o(" Webhook URL "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),e("div",ws,[c(e("input",{"onUpdate:modelValue":t[32]||(t[32]=r=>s.value.url=r),class:A(["w-full rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",{"border-red-500 focus:border-red-500 focus:ring-red-500/20":E.value,"border-green-500 focus:border-green-500 focus:ring-green-500/20":P.value}]),placeholder:"https://...",required:"",type:"url",onInput:$e},null,34),[[k,s.value.url]]),P.value?(d(),n("div",Cs,t[155]||(t[155]=[e("i",{class:"fas fa-check-circle text-green-500"},null,-1)]))):v("",!0),E.value?(d(),n("div",Ss,t[156]||(t[156]=[e("i",{class:"fas fa-exclamation-circle text-red-500"},null,-1)]))):v("",!0)]),fe(s.value.type)?(d(),n("div",Ts,[t[157]||(t[157]=e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"},null,-1)),e("p",Ms,x(fe(s.value.type)),1)])):v("",!0)])):v("",!0),s.value.type==="telegram"?(d(),n("div",Us,[e("div",null,[t[159]||(t[159]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-robot mr-2 text-gray-400"}),o(" Bot Token "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[33]||(t[33]=r=>s.value.botToken=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：123456789:ABCDEFghijk-xyz",required:"",type:"text"},null,512),[[k,s.value.botToken]]),t[160]||(t[160]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 在 Telegram 的 @BotFather 中创建机器人后获得的 Token ",-1))]),e("div",null,[t[161]||(t[161]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-comments mr-2 text-gray-400"}),o(" Chat ID "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[34]||(t[34]=r=>s.value.chatId=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：123456789 或 -1001234567890",required:"",type:"text"},null,512),[[k,s.value.chatId]]),t[162]||(t[162]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 可使用 @userinfobot、@RawDataBot 或 API 获取聊天/频道的 Chat ID ",-1))]),e("div",null,[t[163]||(t[163]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-globe mr-2 text-gray-400"}),o(" API 基础地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[35]||(t[35]=r=>s.value.apiBaseUrl=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: https://api.telegram.org",type:"url"},null,512),[[k,s.value.apiBaseUrl]]),t[164]||(t[164]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 使用自建 Bot API 时可覆盖默认域名，需以 http 或 https 开头 ",-1))]),e("div",null,[t[165]||(t[165]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-route mr-2 text-gray-400"}),o(" 代理地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[36]||(t[36]=r=>s.value.proxyUrl=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：socks5://user:pass@127.0.0.1:1080",type:"text"},null,512),[[k,s.value.proxyUrl]]),t[166]||(t[166]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 支持 http、https、socks4/4a/5 代理，留空则直接连接 Telegram 官方 API ",-1))]),t[167]||(t[167]=e("div",{class:"flex items-start rounded-lg bg-blue-50 p-3 text-sm text-blue-700 dark:bg-blue-900/20 dark:text-blue-300"},[e("i",{class:"fas fa-info-circle mr-2 mt-0.5"}),e("div",null,"机器人需先加入对应群组或频道并授予发送消息权限，通知会以纯文本方式发送。")],-1))])):v("",!0),s.value.type==="bark"?(d(),n("div",As,[e("div",null,[t[168]||(t[168]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-key mr-2 text-gray-400"}),o(" 设备密钥 (Device Key) "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[37]||(t[37]=r=>s.value.deviceKey=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如：aBcDeFgHiJkLmNoPqRsTuVwX",required:"",type:"text"},null,512),[[k,s.value.deviceKey]]),t[169]||(t[169]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 在Bark App中查看您的推送密钥 ",-1))]),e("div",null,[t[170]||(t[170]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),o(" 服务器地址 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[38]||(t[38]=r=>s.value.serverUrl=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: https://api.day.app/push",type:"url"},null,512),[[k,s.value.serverUrl]])]),e("div",null,[t[172]||(t[172]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-flag mr-2 text-gray-400"}),o(" 通知级别 ")],-1)),c(e("select",{"onUpdate:modelValue":t[39]||(t[39]=r=>s.value.level=r),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[171]||(t[171]=[V('<option value="" data-v-3d9302c4>自动（根据通知类型）</option><option value="passive" data-v-3d9302c4>被动</option><option value="active" data-v-3d9302c4>默认</option><option value="timeSensitive" data-v-3d9302c4>时效性</option><option value="critical" data-v-3d9302c4>紧急</option>',5)]),512),[[oe,s.value.level]])]),e("div",null,[t[174]||(t[174]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-volume-up mr-2 text-gray-400"}),o(" 通知声音 ")],-1)),c(e("select",{"onUpdate:modelValue":t[40]||(t[40]=r=>s.value.sound=r),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[173]||(t[173]=[V('<option value="" data-v-3d9302c4>自动（根据通知类型）</option><option value="default" data-v-3d9302c4>默认</option><option value="alarm" data-v-3d9302c4>警报</option><option value="bell" data-v-3d9302c4>铃声</option><option value="birdsong" data-v-3d9302c4>鸟鸣</option><option value="electronic" data-v-3d9302c4>电子音</option><option value="glass" data-v-3d9302c4>玻璃</option><option value="horn" data-v-3d9302c4>喇叭</option><option value="silence" data-v-3d9302c4>静音</option>',9)]),512),[[oe,s.value.sound]])]),e("div",null,[t[175]||(t[175]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-folder mr-2 text-gray-400"}),o(" 通知分组 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[41]||(t[41]=r=>s.value.group=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认: claude-relay",type:"text"},null,512),[[k,s.value.group]])]),t[176]||(t[176]=e("div",{class:"mt-2 flex items-start rounded-lg bg-blue-50 p-3 dark:bg-blue-900/20"},[e("i",{class:"fas fa-info-circle mr-2 mt-0.5 text-blue-600 dark:text-blue-400"}),e("div",{class:"text-sm text-blue-700 dark:text-blue-300"},[e("p",null,"1. 在iPhone上安装Bark App"),e("p",null,"2. 打开App获取您的设备密钥"),e("p",null,"3. 将密钥粘贴到上方输入框")])],-1))])):v("",!0),s.value.type==="smtp"?(d(),n("div",Is,[e("div",null,[t[177]||(t[177]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-server mr-2 text-gray-400"}),o(" SMTP 服务器 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[42]||(t[42]=r=>s.value.host=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"例如: smtp.gmail.com",required:"",type:"text"},null,512),[[k,s.value.host]])]),e("div",Bs,[e("div",null,[t[178]||(t[178]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-plug mr-2 text-gray-400"}),o(" 端口 ")],-1)),c(e("input",{"onUpdate:modelValue":t[43]||(t[43]=r=>s.value.port=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white",max:"65535",min:"1",placeholder:"587",type:"number"},null,512),[[k,s.value.port,void 0,{number:!0}]]),t[179]||(t[179]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 默认: 587 (TLS) 或 465 (SSL) ",-1))]),e("div",null,[t[181]||(t[181]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),o(" 加密方式 ")],-1)),c(e("select",{"onUpdate:modelValue":t[44]||(t[44]=r=>s.value.secure=r),class:"w-full appearance-none rounded-xl border border-gray-300 bg-white px-4 py-3 pr-10 text-gray-900 shadow-sm transition-all focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white"},t[180]||(t[180]=[e("option",{value:!1},"STARTTLS (端口587)",-1),e("option",{value:!0},"SSL/TLS (端口465)",-1)]),512),[[oe,s.value.secure]])])]),e("div",null,[t[182]||(t[182]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-user mr-2 text-gray-400"}),o(" 用户名 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[45]||(t[45]=r=>s.value.user=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"user@example.com",required:"",type:"email"},null,512),[[k,s.value.user]])]),e("div",null,[t[183]||(t[183]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-lock mr-2 text-gray-400"}),o(" 密码 / 应用密码 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[46]||(t[46]=r=>s.value.pass=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"邮箱密码或应用专用密码",required:"",type:"password"},null,512),[[k,s.value.pass]]),t[184]||(t[184]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"}," 建议使用应用专用密码，而非邮箱登录密码 ",-1))]),e("div",null,[t[185]||(t[185]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-paper-plane mr-2 text-gray-400"}),o(" 发件人邮箱 "),e("span",{class:"ml-2 text-xs text-gray-500"},"(可选)")],-1)),c(e("input",{"onUpdate:modelValue":t[47]||(t[47]=r=>s.value.from=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"默认使用用户名邮箱",type:"email"},null,512),[[k,s.value.from]])]),e("div",null,[t[186]||(t[186]=e("label",{class:"mb-2 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-envelope mr-2 text-gray-400"}),o(" 收件人邮箱 "),e("span",{class:"ml-1 text-xs text-red-500"},"*")],-1)),c(e("input",{"onUpdate:modelValue":t[48]||(t[48]=r=>s.value.to=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-700 dark:text-white dark:placeholder:text-gray-500",placeholder:"admin@example.com",required:"",type:"email"},null,512),[[k,s.value.to]]),t[187]||(t[187]=e("p",{class:"mt-1 text-xs text-gray-500 dark:text-gray-400"},"接收通知的邮箱地址",-1))])])):v("",!0),s.value.type==="dingtalk"||s.value.type==="feishu"?(d(),n("div",Rs,[e("div",Es,[e("div",Ds,[e("label",Vs,[c(e("input",{id:"enableSign","onUpdate:modelValue":t[49]||(t[49]=r=>s.value.enableSign=r),class:"h-4 w-4 rounded border-gray-300 text-blue-600 focus:ring-2 focus:ring-blue-500 focus:ring-offset-0",type:"checkbox"},null,512),[[N,s.value.enableSign]]),t[188]||(t[188]=e("span",{class:"ml-3 flex items-center text-sm font-medium text-gray-700 dark:text-gray-300"},[e("i",{class:"fas fa-shield-alt mr-2 text-gray-400"}),o(" 启用签名验证 ")],-1))]),s.value.enableSign?(d(),n("span",$s," 已启用 ")):v("",!0)]),ne(Je,{"enter-active-class":"transition-all duration-200 ease-out","enter-from-class":"opacity-0 -translate-y-2","enter-to-class":"opacity-100 translate-y-0","leave-active-class":"transition-all duration-150 ease-in","leave-from-class":"opacity-100 translate-y-0","leave-to-class":"opacity-0 -translate-y-2"},{default:Ye(()=>[s.value.enableSign?(d(),n("div",Qs,[t[189]||(t[189]=e("label",{class:"mb-2 block text-sm font-medium text-gray-700 dark:text-gray-300"}," 签名密钥 ",-1)),c(e("input",{"onUpdate:modelValue":t[50]||(t[50]=r=>s.value.secret=r),class:"w-full rounded-xl border border-gray-300 bg-white px-4 py-3 font-mono text-sm text-gray-900 shadow-sm transition-all placeholder:text-gray-400 focus:border-blue-500 focus:outline-none focus:ring-2 focus:ring-blue-500/20 dark:border-gray-600 dark:bg-gray-800 dark:text-white dark:placeholder:text-gray-500",placeholder:"SEC...",type:"text"},null,512),[[k,s.value.secret]])])):v("",!0)]),_:1})])])):v("",!0)])]),e("div",Ps,[e("div",qs,[t[191]||(t[191]=e("div",{class:"text-xs text-gray-500 dark:text-gray-400"},[e("i",{class:"fas fa-asterisk mr-1 text-red-500"}),o(" 必填项 ")],-1)),e("div",js,[e("button",{class:"group flex items-center rounded-xl border border-gray-300 bg-white px-4 py-2.5 text-sm font-medium text-gray-700 shadow-sm transition-all hover:bg-gray-50 hover:shadow-md dark:border-gray-600 dark:bg-gray-800 dark:text-gray-300 dark:hover:bg-gray-700",onClick:se},t[190]||(t[190]=[e("i",{class:"fas fa-times mr-2 transition-transform group-hover:scale-110"},null,-1),o(" 取消 ",-1)])),e("button",{class:"group flex items-center rounded-xl border border-blue-200 bg-blue-50 px-4 py-2.5 text-sm font-medium text-blue-700 shadow-sm transition-all hover:bg-blue-100 hover:shadow-md dark:border-blue-800 dark:bg-blue-900/50 dark:text-blue-300 dark:hover:bg-blue-900/70",disabled:L.value,onClick:Ne},[e("i",{class:A(["mr-2 transition-transform",L.value?"fas fa-spinner fa-spin":"fas fa-vial group-hover:scale-110"])},null,2),o(" "+x(L.value?"测试中...":"测试连接"),1)],8,Ls),e("button",{class:"group flex items-center rounded-xl bg-gradient-to-r from-blue-600 to-indigo-600 px-5 py-2.5 text-sm font-medium text-white shadow-md transition-all hover:from-blue-700 hover:to-indigo-700 hover:shadow-lg disabled:cursor-not-allowed disabled:from-gray-400 disabled:to-gray-500",disabled:!Ie.value||O.value,onClick:Qe},[e("i",{class:A(["mr-2 transition-transform",O.value?"fas fa-spinner fa-spin":"fas fa-save group-hover:scale-110"])},null,2),o(" "+x(O.value?"保存中...":Q.value?"保存修改":"添加平台"),1)],8,Ns)])])])]),ne(pt,{"cancel-text":C.value.cancelText,"confirm-text":C.value.confirmText,message:C.value.message,show:K.value,title:C.value.title,type:C.value.type,onCancel:_,onConfirm:G},null,8,["cancel-text","confirm-text","message","show","title","type"])])):v("",!0)],64))}}),_s=st(Os,[["__scopeId","data-v-3d9302c4"]]);export{_s as default};
